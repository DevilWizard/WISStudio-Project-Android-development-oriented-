### 图片加载之三级缓存

现在，图片浏览几乎是app的必备功能。但由于从网络请求图片再加载到页面这个过程很消耗性能，因此为了优化加载性能，很有必要学习一下图片加载的三级缓存机制，这也是主流图片加载框架的机制。

三级缓存指的是内存缓存、文件缓存和网络缓存，其加载效率依次降低。所以三重缓存机制通过如下方式实现：

首先尝试从内存中读取图片，若有则加载，否则进入读取文件缓存。若从文件缓存中读取成功则加载否则，进入最后的网络读取。

下面就细说一下这三种缓存。

#### 1.内存缓存

那么问题来了，为什么要用内存缓存呢？

**快**。首先内存是读取最快的，并且它不像后两个缓存需要频繁打开I/O流，请求大量资源。为了达到读取快的效果，通常使用HashMap实现，能保证读取的时间复杂度为O(1) ，相当于是即读即用。

**复用性好**。事先分配好一定大小空间的用于内存缓存后，缓存在里面的图片能够根据缓存需要随时更新，比较灵活

**能快速加载浏览最频繁的图片**。这也是非常符合用户逻辑的一个优点。由于内存缓存空间有限，所以缓存内的图片会不断更新，利用这个特性，可以将浏览次数较少的那些图片清除，留下那些浏览次数多的，也就是LRU思想即Least Recently Use，近期最少使用思想，以达到此效果。







